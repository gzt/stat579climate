?lubridate
ensemble1$fixedtime <- mdy(ensemble1$fixedtime)
ensemble1$long<-(ensemble1$xloc*5)
ensemble1$lat<-(90-ensemble$yloc*5)
write.csv(ensemble1,"ensemble1.csv")
ensemble1 <- read.csv("ensemble1.csv")
head(ensemble1)
ensemble1$lat<-(90-ensemble1$yloc*5)
ensemble1<-subset(ensemble1, select= -X.1)
write.csv(ensemble1,"ensemble1.csv")
head(ensemble)
jan<-read.csv("ensemble1_jan.csv")
last20<-read.csv("ensemble1_last20.csv")
monthly<-read.csv("monthlyglobaldev.csv")
ensemble1 <- read.csv("ensemble1.csv")
ensemble1 <- read.csv("ensemble1.csv")
ensemble1$long<-(ensemble1$xloc*5)
ensemble1$lat<-(90-ensemble1$yloc*5)
head(ensemble1)
ensemble1<-subset(ensemble1,select = -X.1)
ensemble1$realyear<-ensemble1$year+1849
ensemble1$fixedtime<-paste(ensemble1$realyear,ensemble1$month,"01",sep="-")
head(ensemble1)
write.csv(ensemble1,"ensemble1.csv")
head(ensemble1)
summary(ensemble1)
ensemble1$long<-ensemble1$long-180
write.csv(ensemble1,"ensemble1.csv")
jan<-read.csv("ensemble1_jan.csv")
last20<-read.csv("ensemble1_last20.csv")
monthly<-read.csv("monthlyglobaldev.csv")
ensemble1 <- read.csv("ensemble1.csv")
summary(ensemble1)
ensemble1$fixedtime <- ymd(ensemble1$fixedtime)
suppressMessages(require(lubridate))
ensemble1$fixedtime <- ymd(ensemble1$fixedtime)
stuff<-subset(ensemble1,lat==40 & long==-95 & realyear>1865)
View(stuff)
stuff<-subset(ensemble1,lat==50 & long==10)
View(stuff)
View(stuff)
stuff<-subset(ensemble1,lat==-75 & long==15 & realyear>1960)
View(stuff)
jan<-read.csv("ensemble1_jan.csv")
last20<-read.csv("ensemble1_last20.csv")
monthly<-read.csv("monthlyglobaldev.csv")
ensemble1 <- read.csv("ensemble1.csv")
suppressMessages(library(ggplot2))
suppressMessages(require(lubridate))
suppressMessages(library(RColorBrewer))
suppressMessages(library(maps))
jan2012<-subset(jan,realyear==2012)
sep2012<-subset(last20,((realyear==2012)&(month==9)))
worldmap<-map_data("world")
ensemble1$realyear<-ensemble1$fixedyear
monthly$fixedtime<-ymd(monthly$fixedtime)
ensemble1$fixedtime <- ymd(ensemble1$fixedtime)
recent<-subset(monthly, year(fixedtime)>1975)
recent97<-subset(monthly, X > (max(X) - 180)) #Last 16 years of data
suppressMessages(library(ggplot2))
qplot(fixedtime,value,data=subset(ensemble1,lat==40 & long==-95 & realyear>1865),geom="line",color=value,na.rm=T) + geom_smooth(se=FALSE,color="red",na.rm=T)
head(ensemble1)
ensemble1$fixedyear<-ensemble1$year+1949
ensemble1<-subset(ensemble1, select= -X.1)
ensemble1<-subset(ensemble1, select= -X)
write.csv(ensemble1,"ensemble1.csv")
jan<-read.csv("ensemble1_jan.csv")
last20<-read.csv("ensemble1_last20.csv")
monthly<-read.csv("monthlyglobaldev.csv")
ensemble1 <- read.csv("ensemble1.csv")
suppressMessages(library(ggplot2))
suppressMessages(require(lubridate))
suppressMessages(library(RColorBrewer))
suppressMessages(library(maps))
jan2012<-subset(jan,realyear==2012)
sep2012<-subset(last20,((realyear==2012)&(month==9)))
worldmap<-map_data("world")
ensemble1$realyear<-ensemble1$fixedyear
monthly$fixedtime<-ymd(monthly$fixedtime)
ensemble1$fixedtime <- ymd(ensemble1$fixedtime)
recent<-subset(monthly, year(fixedtime)>1975)
recent97<-subset(monthly, X > (max(X) - 180)) #Last 16 years of data
suppressMessages(library(ggplot2))
qplot(fixedtime,anomaly,data=monthly,geom="line",color=anomaly) + geom_smooth(se=FALSE,color="red")
suppressMessages(library(ggplot2))
qplot(fixedtime,anomaly,data=recent97, color=anomaly) + geom_smooth(method="lm", se=FALSE, color="red")
suppressMessages(library(ggplot2))
qplot(fixedtime,anomaly,data=recent, color=anomaly) + geom_smooth(method="lm", se=FALSE, color="red")
suppressMessages(library(ggplot2))
qplot(fixedtime,value,data=subset(ensemble1,lat==40 & long==-95 & realyear>1865),geom="line",color=value,na.rm=T) + geom_smooth(se=FALSE,color="red",na.rm=T)
suppressMessages(library(ggplot2))
qplot(fixedtime,value,data=subset(ensemble1,lat==50 & long==10),geom="line",color=value) + geom_smooth(se=FALSE,color="red")
suppressMessages(library(ggplot2))
qplot(fixedtime,value,data=subset(ensemble1,lat==-75 & long==15 & realyear>1960),geom="line",color=value,na.rm=T) + geom_smooth(se=FALSE,color="red",na.rm=T)
suppressMessages(library(ggplot2))
qplot(fixedtime,value,data=subset(ensemble1,lat==-75 & long==15 & realyear>1960,xlim=c(1960,2013)),geom="line",color=value,na.rm=T) + geom_smooth(se=FALSE,color="red",na.rm=T)
qplot(fixedtime,value,data=subset(ensemble1,lat==-75 & long==15 & realyear>1960),xlim=c(1960,2013),geom="line",color=value,na.rm=T) + geom_smooth(se=FALSE,color="red",na.rm=T)
qplot(fixedtime,value,data=subset(ensemble1,lat==-75 & long==15 & realyear>1960), xlim=c(1960,2013),geom="line",color=value,na.rm=T) + geom_smooth(se=FALSE,color="red",na.rm=T)
qplot(fixedtime,value,data=subset(ensemble1,lat==-75 & long==15 & realyear>1960),geom="line",color=value,na.rm=T)+scale_x_continuous(c(1960,2013)) + geom_smooth(se=FALSE,color="red",na.rm=T)
qplot(fixedtime,value,data=subset(ensemble1,lat==-75 & long==15 & realyear>1960),geom="line",color=value,na.rm=T) + geom_smooth(se=FALSE,color="red",na.rm=T)
suppressMessages(library(ggplot2))
sep2012<-subset(last20,((realyear==1997)&(month==9)))
q<-ggplot()
q <- q + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
q<-q+geom_tile(data=sep2012, aes(x=long,y=lat,fill=value, alpha=.25))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
print(q)
suppressMessages(library(ggplot2))
qplot(fixedtime,anomaly,data=monthly,geom="line",color=anomaly) + geom_smooth(se=FALSE,color="red")
suppressMessages(library(ggplot2))
qplot(fixedtime,anomaly,data=recent97, color=anomaly) + geom_smooth(method="lm", se=FALSE, color="red")
suppressMessages(library(ggplot2))
qplot(fixedtime,anomaly,data=recent, color=anomaly) + geom_smooth(method="lm", se=FALSE, color="red")
suppressMessages(library(ggplot2))
qplot(fixedtime,value,data=subset(ensemble1,lat==40 & long==-95 & realyear>1865),geom="line",color=value,na.rm=T) + geom_smooth(se=FALSE,color="red",na.rm=T)
suppressMessages(library(ggplot2))
qplot(fixedtime,value,data=subset(ensemble1,lat==50 & long==10),geom="line",color=value) + geom_smooth(se=FALSE,color="red")
suppressMessages(library(ggplot2))
qplot(fixedtime,value,data=subset(ensemble1,lat==-75 & long==15 & realyear>1960),geom="line",color=value,na.rm=T) + geom_smooth(se=FALSE,color="red",na.rm=T)
suppressMessages(library(ggplot2))
sep2012<-subset(ensemble1,((realyear==1978)&(month==9)))
q<-ggplot()
q <- q + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
q<-q+geom_tile(data=sep2012, aes(x=long,y=lat,fill=value, alpha=.25))+  scale_fill_gradient2(limits=c(-5,5),low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
print(q)
suppressMessages(library(ggplot2))
sep2012<-subset(last20,((realyear==1997)&(month==9)))
q<-ggplot()
q <- q + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
q<-q+geom_tile(data=sep2012, aes(x=long,y=lat,fill=value, alpha=.25))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
print(q)
suppressMessages(library(ggplot2))
sep2012<-subset(last20,((realyear==2012)&(month==9)))
q<-ggplot()
q <- q + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
q<-q+geom_tile(data=sep2012, aes(x=long,y=lat,fill=value, alpha=.25))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
print(q)
jan<-read.csv("ensemble1_jan.csv")
last20<-read.csv("ensemble1_last20.csv")
monthly<-read.csv("monthlyglobaldev.csv")
ensemble1 <- read.csv("ensemble1.csv")
suppressMessages(library(ggplot2))
suppressMessages(require(lubridate))
suppressMessages(library(RColorBrewer))
suppressMessages(library(maps))
jan2012<-subset(jan,realyear==2012)
sep2012<-subset(last20,((realyear==2012)&(month==9)))
worldmap<-map_data("world")
ensemble1$realyear<-ensemble1$fixedyear
monthly$fixedtime<-ymd(monthly$fixedtime)
ensemble1$fixedtime <- ymd(ensemble1$fixedtime)
recent<-subset(monthly, year(fixedtime)>1975)
recent97<-subset(monthly, X > (max(X) - 180)) #Last 16 years of data
suppressMessages(library(ggplot2))
sep2012<-subset(ensemble1,((realyear==1978)&(month==9)))
q<-ggplot()
q <- q + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
q<-q+geom_tile(data=sep2012, aes(x=long,y=lat,fill=value, alpha=.25))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
print(q)
View(sep2012)
head(ensemble1)
write.csv(ensemble1,"ensemble1.csv")
View(worldmap)
jan<-read.csv("ensemble1_jan.csv")
last20<-read.csv("ensemble1_last20.csv")
monthly<-read.csv("monthlyglobaldev.csv")
annual<-read.csv("annualensemble1.csv")
ensemble1 <- read.csv("last20.csv")
suppressMessages(library(ggplot2))
suppressMessages(require(lubridate))
suppressMessages(library(RColorBrewer))
suppressMessages(library(maps))
jan2012<-subset(jan,realyear==2012)
sep2012<-subset(last20,((realyear==2012)&(month==9)))
worldmap<-map_data("world")
ensemble1 <- read.csv("ensemble1_last20.csv")
head(ensemble1)
ensemble1$fixedyear<-ensemble1$year+1849
ensemble1$realyear<-ensemble1$fixedyear
monthly$fixedtime<-ymd(monthly$fixedtime)
ensemble1$fixedtime<-paste(ensemble1$fixedyear,ensemble1$month,"01",sep="-")
ensemble1$fixedtime <- ymd(ensemble1$fixedtime)
recent<-subset(monthly, year(fixedtime)>1975)
recent97<-subset(monthly, X > (max(X) - 180)) #Last 16 years of data
onlyfornow<-read.csv("ensemble1.csv")
storycounty<-subset(onlyfornow,lat==40 & long==-95 & realyear>1865)
write.csv(storycounty,"storycounty.csv")
ausburg<-subset(onlyfornow,lat==50 & long==10)
write.csv(augsburg,"augsburg.csv")
antarctica<-subset(onlyfornow,lat==-75 & long==15 & realyear>1960)
write.csv(antarctica,"antarctica.csv")
augsburg<-subset(onlyfornow,lat==50 & long==10)
write.csv(augsburg,"augsburg.csv")
jan<-read.csv("ensemble1_jan.csv")
last20<-read.csv("ensemble1_last20.csv")
monthly<-read.csv("monthlyglobaldev.csv")
annual<-read.csv("annualensemble1.csv")
ensemble1 <- read.csv("ensemble1_last20.csv")
suppressMessages(library(ggplot2))
suppressMessages(require(lubridate))
suppressMessages(library(RColorBrewer))
suppressMessages(library(maps))
jan2012<-subset(jan,realyear==2012)
sep2012<-subset(last20,((realyear==2012)&(month==9)))
worldmap<-map_data("world")
ensemble1$fixedyear<-ensemble1$year+1849
ensemble1$realyear<-ensemble1$fixedyear
monthly$fixedtime<-ymd(monthly$fixedtime)
ensemble1$fixedtime<-paste(ensemble1$fixedyear,ensemble1$month,"01",sep="-")
ensemble1$fixedtime <- ymd(ensemble1$fixedtime)
recent<-subset(monthly, year(fixedtime)>1975)
recent97<-subset(monthly, X > (max(X) - 180)) #Last 16 years of data
augsburg<-read.csv("ausburg.csv")
storycounty<-read.csv("storycounty.csv")
antarctica<-read.csv("antarctica.csv")
augsburg<-read.csv("augsburg.csv")
head(annual)
View(antarctica)
onlyfornow<-read.csv("ensemble1.csv")
onlyfornow$realyear<-onlyfornow$year+1849
onlyfornow$fixedyear<-onlyfornow$realyear
head(onlyfornow)
onlyfornow<-subset(onlyfornow,select= -c(X.1,X))
head(onlyfornow)
storycounty<-subset(onlyfornow,lat==40 & long==-95 & realyear>1865)
write.csv(storycounty,"storycounty.csv")
augsburg<-subset(onlyfornow,lat==50 & long==10)
write.csv(augsburg,"augsburg.csv")
antarctica<-subset(onlyfornow,lat==-75 & long==15 & realyear>1960)
write.csv(antarctica,"antarctica.csv")
write.csv(onlyfornow,"ensemble1.csv")
jan<-read.csv("ensemble1_jan.csv")
last20<-read.csv("ensemble1_last20.csv")
monthly<-read.csv("monthlyglobaldev.csv")
annual<-read.csv("annualensemble1.csv")
annual$value<-annual$newvalue
ensemble1 <- read.csv("ensemble1_last20.csv")
suppressMessages(library(ggplot2))
suppressMessages(require(lubridate))
suppressMessages(library(RColorBrewer))
suppressMessages(library(maps))
jan2012<-subset(jan,realyear==2012)
sep2012<-subset(last20,((realyear==2012)&(month==9)))
worldmap<-map_data("world")
ensemble1$fixedyear<-ensemble1$year+1849
ensemble1$realyear<-ensemble1$fixedyear
monthly$fixedtime<-ymd(monthly$fixedtime)
ensemble1$fixedtime<-paste(ensemble1$fixedyear,ensemble1$month,"01",sep="-")
ensemble1$fixedtime <- ymd(ensemble1$fixedtime)
recent<-subset(monthly, year(fixedtime)>1975)
recent97<-subset(monthly, X > (max(X) - 180)) #Last 16 years of data
augsburg<-read.csv("augsburg.csv")
storycounty<-read.csv("storycounty.csv")
antarctica<-read.csv("antarctica.csv")
head(antarctica)
antarctica$fixedtime<-ymd(antarctica$fixedtime)
qplot(fixedtime,value,data=antarctica,geom="line",color=value,na.rm=T) + geom_smooth(se=FALSE,color="red",na.rm=T)
head(annual)
annual$anomaly<-min(annual$value,3)
annual$anomaly<-max(annual$anomaly,-3)
head(annual)
write.csv(annual,"annualensemble1.csv")
head(last20)
sep2012<-subset(last20,((realyear==2012)&(month==9)))
head(sep2012)
head(annual)
yearsubset<-subset(annual,((realyear %% 25 == 0)|(realyear==2012)))
yearsubset<-subset(annual,((realyear %% 25 == 0)|(realyear==2012)))
q<-ggplot()
q <- q + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
q<-q+geom_tile(data=yearsubset, aes(x=long,y=lat,fill=anomaly, alpha=.85)) + facetwrap(~realyear)+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
print(q)
q<-ggplot()
q <- q + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
q<-q+geom_tile(data=yearsubset, aes(x=long,y=lat,fill=anomaly, alpha=.85)) + facet_wrap(~realyear)+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
print(q)
q<-ggplot()
q <- q + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
q<-q+geom_tile(data=yearsubset, aes(x=long,y=lat,fill=anomaly, alpha=.85)) + facet_wrap(realyear~.)+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
print(q)
q<-ggplot()
q<-q+geom_tile(data=yearsubset, aes(x=long,y=lat,fill=anomaly, alpha=.85)) + facet_wrap(realyear~.)+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
q <- q + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
print(q)
q<-ggplot()
q<-q+geom_tile(data=yearsubset, aes(x=long,y=lat,fill=anomaly, alpha=.85), facet_wrap(realyear~.))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
q <- q + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
print(q)
suppressMessages(library(ggplot2))
year1850<-subset(annual,realyear==1850)
q<-ggplot()
q <- q + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
q<-q+geom_tile(data=year1850, aes(x=long,y=lat,fill=value, alpha=.75))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
print(q)
year1850<-subset(annual,realyear==1850)
q<-ggplot()
q <- q + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
q<-q+geom_tile(data=year1850, aes(x=long,y=lat,fill=anomaly, alpha=.75))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
print(q)
View(year1850)
for(i in 1:length(annual$value)){
annual$anomaly[i]<-min(annual$value[i],3)
annual$anomaly[i]<-max(annual$anomaly[i],-3)}
annual$anomaly<-annual$value
write.csv(annual,"annualensemble1.csv")
install.packages(devtools)
library(devtools)
install_github('slidify', 'ramnathv')
install_github('slidifyLibraries', 'ramnathv')
install.packages("devtools")
library(devtools)
install_github('slidify', 'ramnathv')
install_github('slidifyLibraries', 'ramnathv')
author("climatedeck")
library(slidify)
install_github('slidifyLibraries', 'ramnathv')
install.packages("rtools")
install.packages("~/Downloads/slidify_0.3.1.zip", repos = NULL)
library(slidify)
author("climatedeck")
jan<-read.csv("ensemble1_jan.csv")
last20<-read.csv("ensemble1_last20.csv")
monthly<-read.csv("monthlyglobaldev.csv")
annual<-read.csv("annualensemble1.csv")
annual$value<-annual$newvalue
ensemble1 <- read.csv("ensemble1_last20.csv")
suppressMessages(library(ggplot2))
suppressMessages(require(lubridate))
suppressMessages(library(RColorBrewer))
suppressMessages(library(maps))
jan2012<-subset(jan,realyear==2012)
sep2012<-subset(last20,((realyear==2012)&(month==9)))
worldmap<-map_data("world")
ensemble1$fixedyear<-ensemble1$year+1849
ensemble1$realyear<-ensemble1$fixedyear
monthly$fixedtime<-ymd(monthly$fixedtime)
ensemble1$fixedtime<-paste(ensemble1$fixedyear,ensemble1$month,"01",sep="-")
ensemble1$fixedtime <- ymd(ensemble1$fixedtime)
recent<-subset(monthly, year(fixedtime)>1975)
recent97<-subset(monthly, X > (max(X) - 180)) #Last 16 years of data
augsburg<-read.csv("augsburg.csv")
augsburg$fixedtime<-ymd(augsburg$fixedtime)
storycounty<-read.csv("storycounty.csv")
storycounty$fixedtime<-ymd(storycounty$fixedtime)
antarctica<-read.csv("antarctica.csv")
antarctica$fixedtime<-ymd(antarctica$fixedtime)
setwd("~/Documents/GitHub/stat579climate")
jan<-read.csv("ensemble1_jan.csv")
last20<-read.csv("ensemble1_last20.csv")
monthly<-read.csv("monthlyglobaldev.csv")
annual<-read.csv("annualensemble1.csv")
annual$value<-annual$newvalue
ensemble1 <- read.csv("ensemble1_last20.csv")
suppressMessages(library(ggplot2))
suppressMessages(require(lubridate))
suppressMessages(library(RColorBrewer))
suppressMessages(library(maps))
jan2012<-subset(jan,realyear==2012)
sep2012<-subset(last20,((realyear==2012)&(month==9)))
worldmap<-map_data("world")
ensemble1$fixedyear<-ensemble1$year+1849
ensemble1$realyear<-ensemble1$fixedyear
monthly$fixedtime<-ymd(monthly$fixedtime)
ensemble1$fixedtime<-paste(ensemble1$fixedyear,ensemble1$month,"01",sep="-")
ensemble1$fixedtime <- ymd(ensemble1$fixedtime)
recent<-subset(monthly, year(fixedtime)>1975)
recent97<-subset(monthly, X > (max(X) - 180)) #Last 16 years of data
augsburg<-read.csv("augsburg.csv")
augsburg$fixedtime<-ymd(augsburg$fixedtime)
storycounty<-read.csv("storycounty.csv")
storycounty$fixedtime<-ymd(storycounty$fixedtime)
antarctica<-read.csv("antarctica.csv")
antarctica$fixedtime<-ymd(antarctica$fixedtime)
suppressMessages(library(ggplot2))
year1850<-subset(annual,realyear==1850)
1850plot<-ggplot()
1850plot <- 1850plot + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
1850plot<-1850plot+geom_tile(data=year1850, aes(x=long,y=lat,fill=anomaly, alpha=.75))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
year1875<-subset(annual,realyear==1875)
1875plot<-ggplot()
1875plot <- 1875plot + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
1875plot<-1875plot+geom_tile(data=year1875, aes(x=long,y=lat,fill=anomaly, alpha=.75))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
year1900<-subset(annual,realyear==1900)
1900plot<-ggplot()
1900plot <- 1900plot + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
1900plot<-1900plot+geom_tile(data=year1900, aes(x=long,y=lat,fill=anomaly, alpha=.75))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
year1925<-subset(annual,realyear==1925)
1925plot<-ggplot()
1925plot <- 1925plot + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
1925plot<-1925plot+geom_tile(data=year1925, aes(x=long,y=lat,fill=anomaly, alpha=.75))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
year1950<-subset(annual,realyear==1950)
1950plot<-ggplot()
1950plot <- 1950plot + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
1950plot<-1950plot+geom_tile(data=year1950, aes(x=long,y=lat,fill=anomaly, alpha=.75))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
year1975<-subset(annual,realyear==1975)
1975plot<-ggplot()
1975plot <- 1975plot + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
1975plot<-1975plot+geom_tile(data=year1975, aes(x=long,y=lat,fill=anomaly, alpha=.75))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
year2000<-subset(annual,realyear==2000)
2000plot<-ggplot()
2000plot <- 2000plot + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
2000plot<-2000plot+geom_tile(data=year2000, aes(x=long,y=lat,fill=anomaly, alpha=.75))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
year2012<-subset(annual,realyear==2012)
2012plot<-ggplot()
2012plot <- 2012plot + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
2012plot<-2012plot+geom_tile(data=year2012, aes(x=long,y=lat,fill=anomaly, alpha=.75))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
multiplot <- function(..., plotlist=NULL, file, cols=1, layout=NULL) {
require(grid)
# Make a list from the ... arguments and plotlist
plots <- c(list(...), plotlist)
numPlots = length(plots)
# If layout is NULL, then use 'cols' to determine layout
if (is.null(layout)) {
# Make the panel
# ncol: Number of columns of plots
# nrow: Number of rows needed, calculated from # of cols
layout <- matrix(seq(1, cols * ceiling(numPlots/cols)),
ncol = cols, nrow = ceiling(numPlots/cols))
}
if (numPlots==1) {
print(plots[[1]])
} else {
# Set up the page
grid.newpage()
pushViewport(viewport(layout = grid.layout(nrow(layout), ncol(layout))))
# Make each plot, in the correct location
for (i in 1:numPlots) {
# Get the i,j matrix positions of the regions that contain this subplot
matchidx <- as.data.frame(which(layout == i, arr.ind = TRUE))
print(plots[[i]], vp = viewport(layout.pos.row = matchidx$row,
layout.pos.col = matchidx$col))
}
}
}
multiplot(1850plot,1875plot,1900plot,1925plot,1950plot,1975plot,2000plot,2012plot,cols=2)
View(year1850)
suppressMessages(library(ggplot2))
year1850<-subset(annual,realyear==1850)
1850plot<-ggplot()
library(ggplot2)
1850plot<-ggplot()
a<-ggplot()
dfadfasd<-ggplot()
dfadfasd1<-ggplot()
1850plot<-ggplot()
plot1850<-ggplot
suppressMessages(library(ggplot2))
year1850<-subset(annual,realyear==1850)
library(ggplot2)
plot1850<-ggplot()
plot1850 <- plot1850 + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
plot1850<-plot1850+geom_tile(data=year1850, aes(x=long,y=lat,fill=anomaly, alpha=.75))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
year1875<-subset(annual,realyear==1875)
plot1875<-ggplot()
plot1875 <- plot1875 + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
plot1875<-plot1875+geom_tile(data=year1875, aes(x=long,y=lat,fill=anomaly, alpha=.75))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
year1900<-subset(annual,realyear==1900)
plot1900<-ggplot()
plot1900 <- plot1900 + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
plot1900<-plot1900+geom_tile(data=year1900, aes(x=long,y=lat,fill=anomaly, alpha=.75))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
year1925<-subset(annual,realyear==1925)
plot1925<-ggplot()
plot1925 <- plot1925 + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
plot1925<-plot1925+geom_tile(data=year1925, aes(x=long,y=lat,fill=anomaly, alpha=.75))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
year1950<-subset(annual,realyear==1950)
plot1950<-ggplot()
plot1950 <- plot1950 + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
plot1950<-plot1950+geom_tile(data=year1950, aes(x=long,y=lat,fill=anomaly, alpha=.75))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
year1975<-subset(annual,realyear==1975)
plot1975<-ggplot()
plot1975 <- plot1975 + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
plot1975<-plot1975+geom_tile(data=year1975, aes(x=long,y=lat,fill=anomaly, alpha=.75))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
year2000<-subset(annual,realyear==2000)
plot2000<-ggplot()
plot2000 <- plot2000 + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
plot2000<-plot2000+geom_tile(data=year2000, aes(x=long,y=lat,fill=anomaly, alpha=.75))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
year2012<-subset(annual,realyear==2012)
plot2012<-ggplot()
plot2012 <- plot2012 + geom_polygon( data=worldmap, aes(x=long, y=lat, group = group),colour="black", fill="white" )+ theme(aspect.ratio=1/2)+coord_cartesian(ylim=c(-90,90), xlim=c(-180,180))+scale_y_continuous(breaks=seq(-90, 90, 15))+scale_x_continuous(breaks=seq(-180, 180, 15))
plot2012<-plot2012+geom_tile(data=year2012, aes(x=long,y=lat,fill=anomaly, alpha=.75))+  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0,space = "rgb", na.value = "grey50",guide = "colourbar")+theme_bw()
multiplot <- function(..., plotlist=NULL, file, cols=1, layout=NULL) {
require(grid)
# Make a list from the ... arguments and plotlist
plots <- c(list(...), plotlist)
numPlots = length(plots)
# If layout is NULL, then use 'cols' to determine layout
if (is.null(layout)) {
# Make the panel
# ncol: Number of columns of plots
# nrow: Number of rows needed, calculated from # of cols
layout <- matrix(seq(1, cols * ceiling(numPlots/cols)),
ncol = cols, nrow = ceiling(numPlots/cols))
}
if (numPlots==1) {
print(plots[[1]])
} else {
# Set up the page
grid.newpage()
pushViewport(viewport(layout = grid.layout(nrow(layout), ncol(layout))))
# Make each plot, in the correct location
for (i in 1:numPlots) {
# Get the i,j matrix positions of the regions that contain this subplot
matchidx <- as.data.frame(which(layout == i, arr.ind = TRUE))
print(plots[[i]], vp = viewport(layout.pos.row = matchidx$row,
layout.pos.col = matchidx$col))
}
}
}
multiplot(plot1850,plot1875,plot1900,plot1925,plot1950,plot1975,plot2000,plot2012,cols=2)
print(plot1850)
install.pacakages("grid")
install.package("grid")
install.packages("grid")
